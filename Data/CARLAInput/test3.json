{
  "system": "CooperativeOvertaking",
  "world": { "map": "Town10HD_Opt", "synchronous_mode": true, "fixed_delta_seconds": 0.05 },

  "vehicles": {
    "A": {
      "blueprint": "vehicle.mini.cooper",
      "autopilot": false,
      "spawn": { "map_point": 7 },
      "components": ["Setup_A", "Perception_A", "AckHandler_A"]
    },
    "B": {
      "blueprint": "vehicle.lincoln.mkz",
      "autopilot": false,
      "spawn": { "like_vehicle": "A", "delay": 8.0 },
      "components": [
        "Setup_B",
        "Perception_B",
        "PermissionReqTx_B",
        "PermissionAckRx_B",
        "TrajectoryPlanner_B"
      ]
    }
  },

  "components": [
    { "name": "Setup_A", "vehicle": "A", "behaviour": "tm_autopilot_setup_A", "wcet": "1ms", "deadline": "5ms",
      "config": {"ignore_lights_percentage": 0 } },

    { "name": "InteriorLight_A", "vehicle":"A","behaviour":"noop","period":"40ms","deadline":"40ms","wcet":"10ms","priority":1 },
    { "name": "Perception_A", "vehicle":"A","behaviour":"noop","period":"40ms","deadline":"40ms","wcet":"10ms","priority":1 },
    { "name": "AckHandler_A", "vehicle":"A","behaviour":"ack_handler","deadline":"4ms","wcet":"2ms","priority":1 },

    { "name": "Setup_B", "vehicle": "B", "behaviour": "tm_autopilot_setup_B", "wcet": "1ms", "deadline": "5ms" ,
      "config": {"ignore_lights_percentage": 0 } },

    { "name": "Crash_B","vehicle":"B","behaviour":"noop","deadline":"40ms","wcet":"10ms","priority":1 },
    { "name": "Perception_B","vehicle":"B","behaviour":"noop","period":"40ms","deadline":"40ms","wcet":"10ms","priority":1 },
    { "name": "PermissionReqTx_B","vehicle":"B","behaviour":"request_permission","deadline":"4ms","wcet":"2ms","priority":1 },
    { "name": "PermissionAckRx_B","vehicle":"B","behaviour":"noop","deadline":"4ms","wcet":"2ms","priority":1 },
    { "name": "TrajectoryPlanner_B","vehicle":"B","behaviour":"tm_overtake_on_ack","period":"20ms","deadline":"50ms","wcet":"5ms","priority":1 },
    { "name": "Controller_B","vehicle":"B","behaviour":"noop","deadline":"25ms","wcet":"25ms","priority":1 }

  ],

  "connections": [
    { "name": "OvertakeRequest", "src":"B.PermissionReqTx_B", "dst":"A.AckHandler_A",       "latency_budget":"8ms" },
    { "name": "PermissionAck",   "src":"A.AckHandler_A",      "dst":"B.PermissionAckRx_B",  "latency_budget":"8ms" },
    { "name": "PlanTrigger",     "src":"B.PermissionAckRx_B", "dst":"B.TrajectoryPlanner_B","latency_budget":"2ms" },
    { "name": "ControllerTrigger", "src":"B.TrajectoryPlanner_B", "dst":"B.Controller_B","latency_budget":"2ms" }
  ]
}
